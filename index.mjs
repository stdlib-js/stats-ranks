// Copyright (c) 2024 The Stdlib Authors. License is Apache-2.0: http://www.apache.org/licenses/LICENSE-2.0
/// <reference types="./index.d.ts" />
import e from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-collection@v0.2.2-esm/index.mjs";import r from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-contains@v0.2.2-esm/index.mjs";import n from"https://cdn.jsdelivr.net/gh/stdlib-js/error-tools-fmtprodmsg@v0.2.2-esm/index.mjs";import t from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-array@v0.2.2-esm/index.mjs";import s from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-object@v0.2.2-esm/index.mjs";import{isPrimitive as i}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-string@v0.2.2-esm/index.mjs";import o from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-has-own-property@v0.2.2-esm/index.mjs";var m=["min","max","average","dense","ordinal"],d=["last","first","remove"];function l(l,a){var h,g,f,c,p,j,v,u,w,y,b,x,A,E,L,T,k,N;if(!e(l))throw new TypeError(n("1Lp2O",l));if(A={},arguments.length>1&&(L=function(e,l){return s(l)?o(l,"encoding")&&(e.encoding=l.encoding,!t(e.encoding))?new TypeError(n("1Lp8Z","encoding",e.encoding)):!o(l,"method")||(e.method=l.method,i(e.method)&&r(m,e.method))?!o(l,"missing")||(e.missing=l.missing,i(e.missing)&&r(d,e.missing))?null:new TypeError(n("1Lp4S","missing",d.join('", "'),e.missing)):new TypeError(n("1Lp4S","method",m.join('", "'),e.method)):new TypeError(n("1Lp2V",l))}(A,a),L))throw L;for(b=A.method||"average",j=A.encoding||[null,NaN],w=A.missing||"last",T=l.length,E=[],k=0;k<T;k++)r(j,l[k])||E.push(l[k]);if(h=function(e,n){var t,s,i;for(t=e.length,s=new Array(t),i=0;i<t;i++)s[i]=r(n,e[i]);return s}(l,j),T=E.length,c=0,x=new Array(T),u=function(e){var r,n;for(r=new Array(e.length),n=0;n<e.length;n++)r[n]=n;return r.sort((function(r,n){return function(e,r){return e<r?-1:e>r?1:0}(e[r],e[n])}))}(E),"ordinal"===b)for(k=0;k<T;k++)x[u[k]]=k+1;else for(g=0,k=0;k<T;k++)if(v=k+1,k===T-1||E[u[k]]!==E[u[v]]){switch(b){case"min":y=v-g;break;case"max":y=v;break;case"dense":y=v-g-c,c+=g;break;default:y=v-.5*g}for(N=k-g;N<v;N++)x[u[N]]=y;g=0}else g+=1;if("first"===w){for(f=function(e){var r,n,t;for(r=e.length,n=0,t=0;t<r;t++)n+=e[t];return n}(h),N=1,p=new Array(h.length),k=0;k<h.length;k++)h[k]?(p[k]=N,N+=1):p[k]=x.shift()+f;return p}if("last"===w){for(p=new Array(h.length),k=0;k<h.length;k++)h[k]?p[k]=k+x.length+1:p[k]=x.shift();return p}return x}export{l as default};
//# sourceMappingURL=index.mjs.map
