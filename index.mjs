// Copyright (c) 2023 The Stdlib Authors. License is Apache-2.0: http://www.apache.org/licenses/LICENSE-2.0
/// <reference types="./index.d.ts" />
import e from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-collection@v0.1.0-esm/index.mjs";import r from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-contains@esm/index.mjs";import n from"https://cdn.jsdelivr.net/gh/stdlib-js/error-tools-fmtprodmsg@v0.1.1-esm/index.mjs";import t from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-array@v0.1.1-esm/index.mjs";import s from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-object@v0.1.1-esm/index.mjs";import{isPrimitive as i}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-string@v0.1.1-esm/index.mjs";import o from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-has-own-property@v0.1.1-esm/index.mjs";function m(e){var r,n,t;for(r=e.length,n=0,t=0;t<r;t++)n+=e[t];return n}function d(e){var r,n;for(r=new Array(e.length),n=0;n<e.length;n++)r[n]=n;return r.sort((function(r,n){return function(e,r){return e<r?-1:e>r?1:0}(e[r],e[n])}))}function g(e,n){var t,s,i;for(t=e.length,s=new Array(t),i=0;i<t;i++)s[i]=r(n,e[i]);return s}var l=["min","max","average","dense","ordinal"],a=["last","first","remove"];function h(e,m){return s(m)?o(m,"encoding")&&(e.encoding=m.encoding,!t(e.encoding))?new TypeError(n("1Lp8Z,GX","encoding",e.encoding)):!o(m,"method")||(e.method=m.method,i(e.method)&&r(l,e.method))?!o(m,"missing")||(e.missing=m.missing,i(e.missing)&&r(a,e.missing))?null:new TypeError(n("1Lp2X,3g,4S,GD,Gg,Jm","missing",a.join('", "'),e.missing)):new TypeError(n("1Lp2X,3g,4S,GD,Gg,Jm","method",l.join('", "'),e.method)):new TypeError(n("1Lp2V,FD",m))}function f(t,s){var i,o,l,a,f,c,p,j,u,v,w,y,b,x,G,A,E,L;if(!e(t))throw new TypeError(n("1Lp2O,GW",t));if(b={},arguments.length>1&&(G=h(b,s)))throw G;for(w=b.method||"average",c=b.encoding||[null,NaN],u=b.missing||"last",A=t.length,x=[],E=0;E<A;E++)r(c,t[E])||x.push(t[E]);if(i=g(t,c),A=x.length,a=0,y=new Array(A),j=d(x),"ordinal"===w)for(E=0;E<A;E++)y[j[E]]=E+1;else for(o=0,E=0;E<A;E++)if(p=E+1,E===A-1||x[j[E]]!==x[j[p]]){switch(w){case"min":v=p-o;break;case"max":v=p;break;case"dense":v=p-o-a,a+=o;break;default:v=p-.5*o}for(L=E-o;L<p;L++)y[j[L]]=v;o=0}else o+=1;if("first"===u){for(l=m(i),L=1,f=new Array(i.length),E=0;E<i.length;E++)i[E]?(f[E]=L,L+=1):f[E]=y.shift()+l;return f}if("last"===u){for(f=new Array(i.length),E=0;E<i.length;E++)i[E]?f[E]=E+y.length+1:f[E]=y.shift();return f}return y}export{f as default};
//# sourceMappingURL=index.mjs.map
