// Copyright (c) 2022 The Stdlib Authors. License is Apache-2.0: http://www.apache.org/licenses/LICENSE-2.0
/// <reference types="./index.d.ts" />
import e from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-collection@esm/index.mjs";import r from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-contains@esm/index.mjs";import n from"https://cdn.jsdelivr.net/gh/stdlib-js/error-tools-fmtprodmsg@v0.0.2-esm/index.mjs";import t from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-array@esm/index.mjs";import s from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-object@esm/index.mjs";import{isPrimitive as i}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-string@esm/index.mjs";import o from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-has-own-property@esm/index.mjs";function m(e){var r,n,t;for(r=e.length,n=0,t=0;t<r;t++)n+=e[t];return n}function d(e){var r,n;for(r=new Array(e.length),n=0;n<e.length;n++)r[n]=n;return r.sort((function(r,n){return function(e,r){return e<r?-1:e>r?1:0}(e[r],e[n])}))}function a(e,n){var t,s,i;for(t=e.length,s=new Array(t),i=0;i<t;i++)s[i]=r(n,e[i]);return s}var h=["min","max","average","dense","ordinal"],l=["last","first","remove"];function f(e,m){return s(m)?o(m,"encoding")&&(e.encoding=m.encoding,!t(e.encoding))?new TypeError(n("0fo8t","encoding",e.encoding)):!o(m,"method")||(e.method=m.method,i(e.method)&&r(h,e.method))?!o(m,"missing")||(e.missing=m.missing,i(e.missing)&&r(l,e.missing))?null:new TypeError(n("0fo3t","missing",l.join('", "'),e.missing)):new TypeError(n("0fo3t","method",h.join('", "'),e.method)):new TypeError(n("0fo2h",m))}function g(t,s){var i,o,h,l,g,c,j,p,u,v,w,y,b,x,A,E,T,k;if(!e(t))throw new TypeError(n("0fo2a",t));if(b={},arguments.length>1&&(A=f(b,s)))throw A;for(w=b.method||"average",c=b.encoding||[null,NaN],u=b.missing||"last",E=t.length,x=[],T=0;T<E;T++)r(c,t[T])||x.push(t[T]);if(i=a(t,c),E=x.length,l=0,y=new Array(E),p=d(x),"ordinal"===w)for(T=0;T<E;T++)y[p[T]]=T+1;else for(o=0,T=0;T<E;T++)if(j=T+1,T===E-1||x[p[T]]!==x[p[j]]){switch(w){case"average":default:v=j-.5*o;break;case"min":v=j-o;break;case"max":v=j;break;case"dense":v=j-o-l,l+=o}for(k=T-o;k<j;k++)y[p[k]]=v;o=0}else o+=1;if("first"===u){for(h=m(i),k=1,g=new Array(i.length),T=0;T<i.length;T++)i[T]?(g[T]=k,k+=1):g[T]=y.shift()+h;return g}if("last"===u){for(g=new Array(i.length),T=0;T<i.length;T++)i[T]?g[T]=T+y.length+1:g[T]=y.shift();return g}return y}export{g as default};
//# sourceMappingURL=index.mjs.map
