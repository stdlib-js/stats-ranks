// Copyright (c) 2024 The Stdlib Authors. License is Apache-2.0: http://www.apache.org/licenses/LICENSE-2.0
/// <reference types="./index.d.ts" />
import n from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-collection@v0.1.0-esm/index.mjs";import e from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-contains@esm/index.mjs";import t from"https://cdn.jsdelivr.net/gh/stdlib-js/string-format@v0.1.1-esm/index.mjs";import r from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-array@v0.1.1-esm/index.mjs";import s from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-object@v0.1.1-esm/index.mjs";import{isPrimitive as i}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-string@v0.1.1-esm/index.mjs";import o from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-has-own-property@v0.1.1-esm/index.mjs";function a(n){var e,t,r;for(e=n.length,t=0,r=0;r<e;r++)t+=n[r];return t}function m(n){var e,t;for(e=new Array(n.length),t=0;t<n.length;t++)e[t]=t;return e.sort((function(e,t){return function(n,e){return n<e?-1:n>e?1:0}(n[e],n[t])}))}function d(n,t){var r,s,i;for(r=n.length,s=new Array(r),i=0;i<r;i++)s[i]=e(t,n[i]);return s}var l=["min","max","average","dense","ordinal"],g=["last","first","remove"];function h(n,a){return s(a)?o(a,"encoding")&&(n.encoding=a.encoding,!r(n.encoding))?new TypeError(t("invalid option. `%s` option must be an array. Option: `%s`.","encoding",n.encoding)):!o(a,"method")||(n.method=a.method,i(n.method)&&e(l,n.method))?!o(a,"missing")||(n.missing=a.missing,i(n.missing)&&e(g,n.missing))?null:new TypeError(t('invalid option. `%s` option must be one of the following: "%s". Option: `%s`.',"missing",g.join('", "'),n.missing)):new TypeError(t('invalid option. `%s` option must be one of the following: "%s". Option: `%s`.',"method",l.join('", "'),n.method)):new TypeError(t("invalid argument. Options argument must be an object. Value: `%s`.",a))}function f(r,s){var i,o,l,g,f,p,u,c,j,v,b,w,y,x,A,E,T,k;if(!n(r))throw new TypeError(t("invalid argument. First argument must be an array-like object. Value: `%s`.",r));if(y={},arguments.length>1&&(A=h(y,s)))throw A;for(b=y.method||"average",p=y.encoding||[null,NaN],j=y.missing||"last",E=r.length,x=[],T=0;T<E;T++)e(p,r[T])||x.push(r[T]);if(i=d(r,p),E=x.length,g=0,w=new Array(E),c=m(x),"ordinal"===b)for(T=0;T<E;T++)w[c[T]]=T+1;else for(o=0,T=0;T<E;T++)if(u=T+1,T===E-1||x[c[T]]!==x[c[u]]){switch(b){case"min":v=u-o;break;case"max":v=u;break;case"dense":v=u-o-g,g+=o;break;default:v=u-.5*o}for(k=T-o;k<u;k++)w[c[k]]=v;o=0}else o+=1;if("first"===j){for(l=a(i),k=1,f=new Array(i.length),T=0;T<i.length;T++)i[T]?(f[T]=k,k+=1):f[T]=w.shift()+l;return f}if("last"===j){for(f=new Array(i.length),T=0;T<i.length;T++)i[T]?f[T]=T+w.length+1:f[T]=w.shift();return f}return w}export{f as default};
//# sourceMappingURL=index.mjs.map
